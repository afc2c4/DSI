<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>üîç Verificador Avan√ßado de HTML5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f5f5f5;
      padding-top: 50px;
    }
    .container {
      max-width: 1000px;
    }
    .resultado {
      white-space: pre-wrap;
      background: #fff;
      border: 1px solid #ccc;
      padding: 20px;
      margin-top: 20px;
      border-radius: 5px;
    }
    iframe {
      width: 100%;
      height: 300px;
      border: 1px solid #ccc;
      margin-top: 20px;
      background: #fff;
    }
  </style>
</head>
<body>
<div class="container">
  <h1 class="text-center mb-4">üîç Verificador Avan√ßado de HTML5 Educacional</h1>

  <div class="mb-3">
    <label for="arquivoHtml" class="form-label">Selecione um arquivo .html</label>
    <input class="form-control" type="file" id="arquivoHtml" accept=".html">
  </div>

  <button class="btn btn-primary" onclick="verificarArquivo()">Verificar HTML</button>

  <div id="resultado" class="resultado d-none mt-4"></div>

  <h5 class="mt-4">üëÅÔ∏è Visualiza√ß√£o do HTML carregado:</h5>
  <iframe id="preview" class="mb-4"></iframe>
</div>

<script>
function verificarArquivo() {
  const input = document.getElementById("arquivoHtml");
  const resultadoDiv = document.getElementById("resultado");
  const iframe = document.getElementById("preview");

  resultadoDiv.classList.add("d-none");
  resultadoDiv.textContent = "";

  if (!input.files.length) {
    alert("Por favor, selecione um arquivo HTML.");
    return;
  }

  const file = input.files[0];
  const reader = new FileReader();

  reader.onload = function (event) {
    const conteudo = event.target.result;
    const parser = new DOMParser();
    const doc = parser.parseFromString(conteudo, "text/html");

    const blob = new Blob([conteudo], { type: "text/html" });
    const url = URL.createObjectURL(blob);
    iframe.src = url;

    let resultado = `üìÑ Arquivo analisado: ${file.name}\n\n`;

    // Verifica√ß√£o multim√≠dia
    resultado += "üìå Verifica√ß√£o de multim√≠dia:\n";

    const videos = doc.querySelectorAll("video");
    if (videos.length > 0 && [...videos].every(v => v.hasAttribute("controls"))) {
      resultado += "‚úÖ <video> com controls.\n";
    } else if (videos.length > 0) {
      resultado += "‚ö†Ô∏è <video> sem controls.\n";
    } else {
      resultado += "‚ö†Ô∏è Nenhum <video> encontrado.\n";
    }

    const audios = doc.querySelectorAll("audio");
    if (audios.length > 0 && [...audios].every(a => a.hasAttribute("controls"))) {
      resultado += "‚úÖ <audio> com controls.\n";
    } else if (audios.length > 0) {
      resultado += "‚ö†Ô∏è <audio> sem controls.\n";
    } else {
      resultado += "‚ö†Ô∏è Nenhum <audio> encontrado.\n";
    }

    resultado += "\nüìå Verifica√ß√£o de imagens:\n";
    const imagens = doc.querySelectorAll("img");
    let imagensSemAlt = 0;
    imagens.forEach(img => {
      if (!img.hasAttribute("alt")) imagensSemAlt++;
    });
    resultado += imagens.length > 0
      ? `‚úÖ ${imagens.length} imagem(ns) encontradas.\n`
      : "‚ö†Ô∏è Nenhuma <img> encontrada.\n";
    if (imagensSemAlt > 0) {
      resultado += `‚ö†Ô∏è ${imagensSemAlt} imagem(ns) sem alt.\n`;
    }

    // Formul√°rio
    resultado += "\nüìå Verifica√ß√£o de formul√°rio:\n";
    const forms = doc.querySelectorAll("form");
    if (forms.length > 0) {
      resultado += `‚úÖ ${forms.length} <form> encontrado(s).\n`;

      forms.forEach((form, i) => {
        const labels = form.querySelectorAll("label");
        const inputs = form.querySelectorAll("input, select, textarea");
        let labelsAssociadas = 0;
        labels.forEach(label => {
          if (label.hasAttribute("for")) labelsAssociadas++;
        });

        resultado += `  ‚ñ∂Ô∏è Formul√°rio ${i + 1}:\n`;
        resultado += `     - ${labels.length} label(s), ${labelsAssociadas} com for\n`;
        resultado += `     - ${inputs.length} campo(s)\n`;

        const comValidacao = [...inputs].filter(el =>
          el.hasAttribute("required") || el.hasAttribute("min") || el.hasAttribute("pattern")
        ).length;

        resultado += `     - ${comValidacao} campo(s) com valida√ß√£o HTML5\n`;
      });
    } else {
      resultado += "‚ùå Nenhum <form> encontrado.\n";
    }

    // Class e ID
    resultado += "\nüìå Verifica√ß√£o de class/id e CSS:\n";
    const campos = doc.querySelectorAll("input, select, textarea, button");
    let comClass = 0, comId = 0;
    campos.forEach(el => {
      if (el.classList.length > 0) comClass++;
      if (el.id) comId++;
    });

    resultado += `‚úÖ ${comClass} campo(s) com class.\n`;
    resultado += `‚úÖ ${comId} campo(s) com id.\n`;

    const estiloInline = conteudo.includes("style=");
    const estiloInterno = doc.querySelectorAll("style").length > 0;
    const estiloExterno = doc.querySelectorAll("link[rel='stylesheet']").length > 0;

    if (estiloInline) resultado += "‚úÖ Estilo inline presente.\n";
    if (estiloInterno) resultado += "‚úÖ Estilo interno (<style>) presente.\n";
    if (estiloExterno) resultado += "‚úÖ Estilo externo (<link>) presente.\n";
    if (!estiloInline && !estiloInterno && !estiloExterno) {
      resultado += "‚ö†Ô∏è Nenhum CSS detectado.\n";
    }

    // Agrupamento e alinhamento
    resultado += "\nüìå Verifica√ß√£o de agrupamento de m√≠dia:\n";
    const midiaContainer = doc.querySelector(".media");

    if (midiaContainer) {
      const temVideo = midiaContainer.querySelector("video");
      const temAudio = midiaContainer.querySelector("audio");
      const temImagem = midiaContainer.querySelector("img");

      if (temVideo && temAudio && temImagem) {
        resultado += "‚úÖ <img>, <video> e <audio> agrupados na mesma .media.\n";
      } else {
        resultado += "‚ö†Ô∏è Nem todos os elementos est√£o na mesma .media.\n";
      }

      const matchDisplay = conteudo.match(/\.media\s*{[^}]*display\s*:\s*(flex|grid)/i);
      if (matchDisplay) {
        resultado += `‚úÖ .media usa display: ${matchDisplay[1]}.\n`;
      } else {
        resultado += "‚ö†Ô∏è .media sem display: flex/grid.\n";
      }
    } else {
      resultado += "‚ö†Ô∏è Nenhum container com class .media.\n";
    }

    // Efeitos visuais
    resultado += "\nüìå Verifica√ß√£o de efeitos :hover e :focus:\n";

    if (conteudo.includes(":hover")) {
      resultado += "‚úÖ Efeito :hover detectado.\n";
      const hoverBtn = conteudo.match(/(button|\.botao)\s*:\s*hover/i);
      resultado += hoverBtn
        ? "‚úÖ :hover aplicado ao bot√£o ou .botao.\n"
        : "‚ö†Ô∏è Nenhum :hover aplicado a bot√£o ou .botao.\n";
    } else {
      resultado += "‚ö†Ô∏è Nenhum :hover encontrado.\n";
    }

    if (conteudo.includes(":focus")) {
      resultado += "‚úÖ Efeito :focus detectado.\n";
    } else {
      resultado += "‚ö†Ô∏è Nenhum :focus encontrado.\n";
    }

    // Verifica√ß√£o das classes padr√£o
    resultado += "\nüìå Verifica√ß√£o de classes padr√£o:\n";

    const temCampo = conteudo.includes('class="campo"') || conteudo.includes("class='campo'");
    const temBotao = conteudo.includes('class="botao"') || conteudo.includes("class='botao'");
    const temForm = conteudo.includes('class="formulario"') || conteudo.includes("class='formulario'");

    resultado += temForm ? "‚úÖ Classe .formulario presente.\n" : "‚ö†Ô∏è Classe .formulario ausente.\n";
    resultado += temCampo ? "‚úÖ Classe .campo usada.\n" : "‚ö†Ô∏è Classe .campo ausente.\n";
    resultado += temBotao ? "‚úÖ Classe .botao usada.\n" : "‚ö†Ô∏è Classe .botao ausente.\n";

    resultadoDiv.textContent = resultado;
    resultadoDiv.classList.remove("d-none");
  };

  reader.onerror = function () {
    alert("Erro ao ler o arquivo.");
  };

  reader.readAsText(file);
}
</script>
</body>
</html>
